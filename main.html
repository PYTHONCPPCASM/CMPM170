<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>crisp-game-lib</title>
    <meta
      name="viewport"
      content="width=device-width, height=device-height,
    user-scalable=no, initial-scale=1, maximum-scale=1"
    />
    <script src="https://unpkg.com/sounds-some-sounds@1.0.5/build/index.js"></script>
    <script src="https://unpkg.com/gif-capture-canvas@1.1.0/build/index.js"></script>
    <script src="https://unpkg.com/terser@4.6.11/dist/bundle.min.js"></script>
    <script src="https://unpkg.com/pixi.js@5.3.0/dist/pixi.min.js"></script>
    <script src="https://unpkg.com/pixi-filters@3.1.1/dist/pixi-filters.js"></script>
    <script>
      var module = {};
    </script>
    <script src="https://unpkg.com/lodash.clonedeep@4.5.0/index.js"></script>
    <script src="https://abagames.github.io/crisp-game-lib/bundle.js"></script>

<script>
title = "BULLET TIME";

description = `
  HOLD TO ACTIVATE BULLET TIME USING ENERGY
`;

characters = [
`
l cc l
lccccl
  cc  
l cc l
lccccl
l ll l
`,
`
rr  rr
rrrrrr
rrpprr
rrrrrr
  rr
  rr
`,`
y  y
yyyyyy
 y  y
yyyyyy
 y  y
`,`
  ll
 llll
 llll
llllll
llllll
 llll  
`
];


let player;

  const G = {
    WIDTH: 100,
    HEIGHT: 150,

    STAR_SPEED_MIN: 0.5,
    STAR_SPEED_MAX: 1.0,

    PLAYER_FIRE_RATE: 4,
    PLAYER_GUN_OFFSET: 3,
    FBULLET_SPEED: 5,
    
    ENEMY_MIN_BASE_SPEED: 1.0,
    ENEMY_MAX_BASE_SPEED: 2.0,
    ENEMY_FIRE_RATE: 45,

    EBULLET_SPEED: 2.0,
    EBULLET_ROTATION_SPD: 0.1,

    SPINNING : 10

  };

options = {
  viewSize: {x: G.WIDTH, y: G.HEIGHT},
  seed : 45,
  isPlayingBgm: true,
  isReplayEnabled: true
};

  let list;
  list = [];

  player = {
    pos: vec(G.WIDTH / 2, G.HEIGHT / 2)
  }

function update() {
  if (!ticks) {
    SPEED = 1;
    energy = 10;
    missed = 0;
  }

  player.pos = vec(input.pos.x, input.pos.y);
  player.pos.clamp(0, G.WIDTH, 0, G.HEIGHT);
  char("b", player.pos);

//constantly filling the list
  if(list.length === 0){
    for(let i = 0; i < 1; i++){
      const posX = rnd(0, 100);
      list.push({pos: vec(posX, 30)});
    }
  }

  remove(list, (l)=>{

    color("green");
    arc(l.pos.x, l.pos.y, 10, 10, 180);
    l.pos.y += SPEED;

    if((char("b", player.pos).isColliding.rect.green) && input.isPressed){
      energy++;
      play("jump");
    }

    if(l.pos.y > G.HEIGHT){
      missed += 1;
      play("powerUp");
    }

    return l.pos.y > G.HEIGHT || (char("b", player.pos).isColliding.rect.green && input.isPressed);
  });

}


function abs(a){
  if(a < 0){
    a *= -1;
  } else {
    return a;
  }
  return a;
}

addEventListener("load", onLoad);
</script>

  </head>
  <body style="background: #ddd"></body>
</html>